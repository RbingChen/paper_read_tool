<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>RankMixerè®ºæ–‡è§£æ</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; }
        .original { background-color: #f0f0f0; border: 1px solid #ccc; padding: 15px; margin: 10px 0; }
        .translation { background-color: #e0f7e0; border: 1px solid #4CAF50; padding: 15px; margin: 10px 0; }
        .figure { background-color: #fffde7; padding: 15px; margin: 20px 0; text-align: center; }
        .term { color: red; font-weight: bold; }
        .section-title { color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 5px; }
        .formula-container { text-align: center; margin: 20px 0; }
        .formula-number { display: block; font-style: italic; }
    </style>
</head>
<body>

<!-- å†…å®¹ç†è§£ -->
<h2 class="section-title">å†…å®¹ç†è§£</h2>
<div>
    <p>æœ¬æ–‡æå‡º<strong class="term">RankMixer</strong>æ¨¡å‹ï¼Œè§£å†³å·¥ä¸šæ¨èç³»ç»Ÿä¸­æ’åºæ¨¡å‹çš„æ‰©å±•æ€§é—®é¢˜ã€‚æ ¸å¿ƒåˆ›æ–°ç‚¹åŒ…æ‹¬ï¼š</p>
    <ul>
        <li><strong class="term">åŸºäºè¯­ä¹‰çš„ä»¤ç‰ŒåŒ–(Tokenization)</strong>ï¼šå°†æ•°ç™¾ä¸ªç‰¹å¾åµŒå…¥åˆ†ç»„ä¸ºè¯­ä¹‰ç›¸å…³çš„ç°‡ï¼Œè½¬åŒ–ä¸ºå›ºå®šç»´åº¦çš„ç‰¹å¾ä»¤ç‰Œï¼Œå¹³è¡¡è®¡ç®—æ•ˆç‡ä¸ç‰¹å¾è¡¨è¾¾èƒ½åŠ›ã€‚</li>
        <li><strong class="term">RankMixerå—(RankMixer Block)</strong>ï¼šåŒ…å«ä¸¤ä¸ªå…³é”®æ¨¡å—â€”â€”<strong class="term">å¤šå¤´ä»¤ç‰Œæ··åˆ(Multi-head Token Mixing)</strong>å®ç°è·¨ç‰¹å¾äº¤äº’ï¼Œ<strong class="term">ç¨€ç–ä¸“å®¶æ··åˆ(SMoE)</strong>å¢å¼ºæ¨¡å‹å®¹é‡ã€‚</li>
        <li>æ¶æ„è®¾è®¡ï¼šé€šè¿‡ä»¤ç‰Œåˆ†å‰²/é‡ç»„æœºåˆ¶ï¼ˆå…¬å¼3-4ï¼‰æå‡ç‰¹å¾äº¤å‰èƒ½åŠ›ï¼Œé¿å…å…³é”®ç‰¹å¾è¢«ä¸»å¯¼ç‰¹å¾æ©ç›–ã€‚</li>
    </ul>
    <p>è¯¥è®¾è®¡è§£å†³äº†ä¼ ç»Ÿæ–¹æ³•ä¸­ç‰¹å¾ä»¤ç‰Œè¿‡å¤šï¼ˆGPUåˆ©ç”¨ç‡ä½ï¼‰æˆ–è¿‡å°‘ï¼ˆé€€åŒ–ä¸ºç®€å•DNNï¼‰çš„ä¸¤éš¾é—®é¢˜ã€‚</p>
</div>

<!-- å†…å®¹ç¿»è¯‘ -->
<h2 class="section-title">å†…å®¹ç¿»è¯‘</h2>

<div class="original">
    RankMixer: Scaling Up Ranking Models in Industrial Recommenders<br>
    Conference acronym â€™XX, June 03â€“05, 2018, Woodstock, NY
</div>
<div class="translation">
    RankMixerï¼šå·¥ä¸šæ¨èç³»ç»Ÿä¸­æ’åºæ¨¡å‹çš„æ‰©å±•<br>
    ä¼šè®®ç¼©å†™â€™XXï¼Œ2018å¹´6æœˆ3-5æ—¥ï¼Œçº½çº¦å·ä¼å¾·æ–¯æ‰˜å…‹
</div>

<div class="figure">
    <strong>Figure 1:</strong> The architecture of a RankMixer block. A RankMixer block consists of two modules: Multi-head Token Mixing and SMoE based Per-token FFN. The token-mixing module divides each tokenâ€™s embedding into ğ» smaller parts (heads), then recombines these parts across tokens to create new mixed tokens. This allows information from different features to interact with each other.
    <br><br>
    <strong>å›¾1ï¼š</strong> RankMixerå—æ¶æ„ã€‚ä¸€ä¸ªRankMixerå—åŒ…å«ä¸¤ä¸ªæ¨¡å—ï¼šå¤šå¤´ä»¤ç‰Œæ··åˆå’ŒåŸºäºSMoEçš„é€ä»¤ç‰ŒFFNã€‚ä»¤ç‰Œæ··åˆæ¨¡å—å°†æ¯ä¸ªä»¤ç‰Œçš„åµŒå…¥åˆ’åˆ†ä¸ºğ»ä¸ªè¾ƒå°éƒ¨åˆ†ï¼ˆå¤´ï¼‰ï¼Œç„¶åè·¨ä»¤ç‰Œé‡ç»„è¿™äº›éƒ¨åˆ†ä»¥åˆ›å»ºæ–°çš„æ··åˆä»¤ç‰Œï¼Œä½¿ä¸åŒç‰¹å¾çš„ä¿¡æ¯èƒ½å¤Ÿäº¤äº’ã€‚
</div>

<div class="original">
    To enable efficient parallel computation in later stages, embeddings of varying dimensions must be transformed into dimensional-aligned vectors, called feature-tokens. We refer to this embedding alignment process as tokenization. The simplest strategy is assigning one embedding per feature which introduces several challenges given typically hundreds of features. Having hundreds of tokens inevitably reduces the parameters and computation allocated per token to small fragments, resulting in insufficient modeling of important features and under-utilization of GPU cores. Conversely, too few tokens (e.g. a single token) degrade the model structure into a simple Deep Neural Network (DNN), unable to distinctly represent diverse feature spaces, which risks dominant features overshadowing others.
</div>
<div class="translation">
    ä¸ºå®ç°åç»­é˜¶æ®µçš„é«˜æ•ˆå¹¶è¡Œè®¡ç®—ï¼Œå¿…é¡»å°†ä¸åŒç»´åº¦çš„åµŒå…¥è½¬æ¢ä¸ºç»´åº¦å¯¹é½çš„å‘é‡ï¼Œç§°ä¸º<strong class="term">ç‰¹å¾ä»¤ç‰Œ(feature-tokens)</strong>ã€‚æˆ‘ä»¬å°†æ­¤åµŒå…¥å¯¹é½è¿‡ç¨‹ç§°ä¸º<strong class="term">ä»¤ç‰ŒåŒ–(Tokenization)</strong>ã€‚æœ€ç®€å•çš„ç­–ç•¥æ˜¯ä¸ºæ¯ä¸ªç‰¹å¾åˆ†é…ä¸€ä¸ªåµŒå…¥ï¼Œä½†å½“å­˜åœ¨æ•°ç™¾ä¸ªç‰¹å¾æ—¶ä¼šå¸¦æ¥æŒ‘æˆ˜ã€‚è¿‡å¤šçš„ä»¤ç‰Œä¼šä½¿æ¯ä¸ªä»¤ç‰Œåˆ†é…çš„å‚æ•°é‡å’Œè®¡ç®—é‡ç¢ç‰‡åŒ–ï¼Œå¯¼è‡´é‡è¦ç‰¹å¾å»ºæ¨¡ä¸è¶³å’ŒGPUæ ¸å¿ƒåˆ©ç”¨ç‡ä½ä¸‹ã€‚åä¹‹ï¼Œè¿‡å°‘çš„ä»¤ç‰Œï¼ˆå¦‚å•ä¸ªä»¤ç‰Œï¼‰ä¼šä½¿æ¨¡å‹é€€åŒ–ä¸ºç®€å•<strong class="term">æ·±åº¦ç¥ç»ç½‘ç»œ(DNN)</strong>ï¼Œæ— æ³•åŒºåˆ†ä¸åŒç‰¹å¾ç©ºé—´ï¼Œä¸”ä¸»å¯¼ç‰¹å¾å¯èƒ½æ©ç›–å…¶ä»–ç‰¹å¾ã€‚
</div>

<div class="original">
    To overcome these issues, we propose a semantic-based tokenization approach with domain knowledge and group features into several semantically coherent clusters. These grouped features are sequentially concatenated into one embedding vector ğ‘’<sub>input</sub> =[ğ‘’<sub>1</sub>;ğ‘’<sub>2</sub>;...;ğ‘’<sub>ğ‘</sub>], and subsequently partitioned into an appropriate number of tokens with fixed dimension sizes. Each feature token ğ‘¥<sub>ğ‘–</sub>âˆˆâ„<sup>ğ·</sup> captures a set of feature embeddings that represent a similar semantic aspect.
</div>
<div class="translation">
    ä¸ºå…‹æœè¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬æå‡ºåŸºäºé¢†åŸŸçŸ¥è¯†çš„<strong class="term">è¯­ä¹‰ä»¤ç‰ŒåŒ–(semantic-based tokenization)</strong>æ–¹æ³•ï¼Œå°†ç‰¹å¾åˆ†ç»„ä¸ºè‹¥å¹²è¯­ä¹‰è¿è´¯çš„ç°‡ã€‚è¿™äº›åˆ†ç»„ç‰¹å¾è¢«é¡ºåºæ‹¼æ¥ä¸ºåµŒå…¥å‘é‡ğ‘’<sub>input</sub> =[ğ‘’<sub>1</sub>;ğ‘’<sub>2</sub>;...;ğ‘’<sub>ğ‘</sub>]ï¼Œç„¶ååˆ’åˆ†ä¸ºå›ºå®šç»´åº¦çš„é€‚é‡ä»¤ç‰Œã€‚æ¯ä¸ªç‰¹å¾ä»¤ç‰Œğ‘¥<sub>ğ‘–</sub>âˆˆâ„<sup>ğ·</sup>æ•è·ä»£è¡¨ç›¸ä¼¼è¯­ä¹‰æ–¹é¢çš„ä¸€ç»„ç‰¹å¾åµŒå…¥ã€‚
</div>

<div class="formula-container">
    $$x_i = \text{Proj}(e_{\text{input}}[d \cdot (i-1) : d \cdot i]), \quad i=1,\dots,T \tag{2}$$
    <span class="formula-number">å…¬å¼(2)ï¼šä»¤ç‰Œç”Ÿæˆå‡½æ•°ã€‚å…¶ä¸­ğ‘’<sub>input</sub>ä¸ºæ‹¼æ¥åµŒå…¥å‘é‡ï¼Œğ‘‘ä¸ºä»¤ç‰Œå›ºå®šç»´åº¦ï¼Œğ‘ä¸ºç‰¹å¾ç»„æ•°ï¼Œğ‘‡ä¸ºä»¤ç‰Œæ•°é‡ï¼ŒProjå‡½æ•°å°†åˆ†å‰²åçš„åµŒå…¥æ˜ å°„åˆ°ğ·ç»´ã€‚</span>
</div>

<div class="original">
    3.3 RankMixer Block<br>
    3.3.1 Multi-head Token Mixing. To facilitate effective information exchange across tokens which is important for feature cross and global information modeling, we introduce the multi-head Token Mixing module. Each token is evenly divided into ğ» heads, with the â„-th head of token x<sub>ğ‘¡</sub> denoted as ğ‘¥<sup>â„</sup><sub>ğ‘¡</sub>:
</div>
<div class="translation">
    3.3 RankMixerå—<br>
    3.3.1 å¤šå¤´ä»¤ç‰Œæ··åˆã€‚ä¸ºä¿ƒè¿›è·¨ä»¤ç‰Œçš„æœ‰æ•ˆä¿¡æ¯äº¤æ¢ï¼ˆå¯¹ç‰¹å¾äº¤å‰å’Œå…¨å±€ä¿¡æ¯å»ºæ¨¡è‡³å…³é‡è¦ï¼‰ï¼Œæˆ‘ä»¬å¼•å…¥<strong class="term">å¤šå¤´ä»¤ç‰Œæ··åˆ(Multi-head Token Mixing)</strong>æ¨¡å—ã€‚æ¯ä¸ªä»¤ç‰Œè¢«å‡åŒ€åˆ’åˆ†ä¸ºğ»ä¸ªå¤´ï¼Œä»¤ç‰Œx<sub>ğ‘¡</sub>çš„ç¬¬â„ä¸ªå¤´è®°ä¸ºğ‘¥<sup>â„</sup><sub>ğ‘¡</sub>ï¼š
</div>

<div class="formula-container">
    $$[\mathbf{x}^{(1)}_t \| \mathbf{x}^{(2)}_t \| \dots \| \mathbf{x}^{(H)}_t] = \text{SplitHead}(\mathbf{x}_t) \tag{3}$$
    <span class="formula-number">å…¬å¼(3)ï¼šä»¤ç‰Œåˆ†å‰²æ“ä½œ</span>
</div>

<div class="original">
    These heads can be seen as projections of the token x<sub>ğ‘¡</sub> into a lower-dimensional feature subspace since recommendation is task taking different perspectives into considerations. Token Mixing is used to fuse these sub-space vector for global feature interactions. Formally, the â„-th token s<sup>â„</sup> corresponding to the â„-th head after the multi-head Token Mixing is constructed as:
</div>
<div class="translation">
    è¿™äº›å¤´å¯è§†ä¸ºä»¤ç‰Œx<sub>ğ‘¡</sub>åœ¨ä½ç»´ç‰¹å¾å­ç©ºé—´çš„æŠ•å½±ï¼ˆæ¨èä»»åŠ¡éœ€è€ƒè™‘ä¸åŒè§†è§’ï¼‰ã€‚ä»¤ç‰Œæ··åˆç”¨äºèåˆè¿™äº›å­ç©ºé—´å‘é‡ä»¥å®ç°å…¨å±€ç‰¹å¾äº¤äº’ã€‚å½¢å¼åŒ–åœ°ï¼Œæ··åˆåç¬¬â„ä¸ªä»¤ç‰Œs<sup>â„</sup>çš„æ„å»ºæ–¹å¼ä¸ºï¼š
</div>

<div class="formula-container">
    $$\mathbf{s}^h = \text{Concat}(\mathbf{x}^h_1, \mathbf{x}^h_2, \dots, \mathbf{x}^h_T) \tag{4}$$
    <span class="formula-number">å…¬å¼(4)ï¼šè·¨ä»¤ç‰Œé‡ç»„æ“ä½œ</span>
</div>

<!-- æ‘˜è¦æ€»ç»“ -->
<h2 class="section-title">æ‘˜è¦æ€»ç»“</h2>
<div>
    <p>æœ¬æ–‡æå‡º<strong class="term">RankMixer</strong>æ¨¡å‹è§£å†³å·¥ä¸šæ¨èç³»ç»Ÿæ’åºæ¨¡å‹çš„æ‰©å±•ç“¶é¢ˆï¼š</p>
    <ol>
        <li>æå‡º<strong class="term">è¯­ä¹‰ä»¤ç‰ŒåŒ–(semantic-based tokenization)</strong>æ–¹æ³•ï¼Œé€šè¿‡ç‰¹å¾åˆ†ç»„å’ŒæŠ•å½±ï¼ˆå…¬å¼2ï¼‰å°†æ•°ç™¾ç»´ç‰¹å¾è½¬åŒ–ä¸ºç»´åº¦å¯¹é½çš„ä»¤ç‰Œï¼Œå¹³è¡¡è®¡ç®—æ•ˆç‡ä¸ç‰¹å¾è¡¨è¾¾èƒ½åŠ›</li>
        <li>è®¾è®¡æ ¸å¿ƒç»„ä»¶<strong class="term">RankMixerå—(RankMixer Block)</strong>ï¼š
            <ul>
                <li><strong class="term">å¤šå¤´ä»¤ç‰Œæ··åˆ(Multi-head Token Mixing)</strong>ï¼šåˆ†å‰²ä»¤ç‰Œä¸ºå­ç©ºé—´ï¼ˆå…¬å¼3ï¼‰ï¼Œè·¨ä»¤ç‰Œé‡ç»„å®ç°ç‰¹å¾äº¤å‰ï¼ˆå…¬å¼4ï¼‰</li>
                <li><strong class="term">ç¨€ç–ä¸“å®¶æ··åˆ(SMoE)</strong>ï¼šé€šè¿‡æ¡ä»¶è·¯ç”±å¢å¼ºæ¨¡å‹å®¹é‡</li>
            </ul>
        </li>
        <li>è§£å†³ä¼ ç»Ÿæ–¹æ¡ˆä¸­ç‰¹å¾ä»¤ç‰Œè¿‡å¤šï¼ˆGPUåˆ©ç”¨ç‡ä½ï¼‰æˆ–è¿‡å°‘ï¼ˆé€€åŒ–ä¸ºDNNï¼‰çš„çŸ›ç›¾ï¼Œæå‡é‡è¦ç‰¹å¾å»ºæ¨¡èƒ½åŠ›</li>
    </ol>
</div>

<!-- æœ¯è¯­è¯†åˆ« -->
<h2 class="section-title">æœ¯è¯­è§£é‡Š</h2>
<div>
    <dl>
        <dt><strong class="term">ä»¤ç‰ŒåŒ–(Tokenization)</strong></dt>
        <dd>å°†ä¸åŒç»´åº¦çš„åŸå§‹ç‰¹å¾åµŒå…¥è½¬æ¢ä¸ºç»Ÿä¸€ç»´åº¦çš„ç‰¹å¾ä»¤ç‰Œçš„è¿‡ç¨‹ã€‚æ ¸å¿ƒæŒ‘æˆ˜æ˜¯å¹³è¡¡ä»¤ç‰Œæ•°é‡ä¸è®¡ç®—æ•ˆç‡ï¼Œæœ¬æ–‡æå‡ºåŸºäºè¯­ä¹‰åˆ†ç»„çš„ä¼˜åŒ–æ–¹æ¡ˆã€‚</dd>
        
        <dt><strong class="term">ç‰¹å¾ä»¤ç‰Œ(Feature-tokens)</strong></dt>
        <dd>ç»´åº¦å¯¹é½çš„å‘é‡è¡¨ç¤ºï¼ˆğ‘¥<sub>ğ‘–</sub>âˆˆâ„<sup>ğ·</sup>ï¼‰ï¼Œæ¯ä¸ªä»¤ç‰Œæ•è·ä¸€ä¸ªè¯­ä¹‰ç›¸å…³çš„ç‰¹å¾å­é›†ã€‚é€šè¿‡å…¬å¼(2)çš„æŠ•å½±å‡½æ•°ç”Ÿæˆã€‚</dd>
        
        <dt><strong class="term">å¤šå¤´ä»¤ç‰Œæ··åˆ(Multi-head Token Mixing)</strong></dt>
        <dd>RankMixerçš„æ ¸å¿ƒç»„ä»¶ï¼š1) å°†æ¯ä¸ªä»¤ç‰Œåˆ†å‰²ä¸ºğ»ä¸ªä½ç»´å­ç©ºé—´ï¼ˆå…¬å¼3ï¼‰ 2) è·¨ä»¤ç‰Œé‡ç»„åŒç´¢å¼•çš„å­ç©ºé—´ï¼ˆå…¬å¼4ï¼‰ 3) å®ç°å…¨å±€ç‰¹å¾äº¤äº’ï¼Œé¿å…ä¸»å¯¼ç‰¹å¾æ©ç›–æ¬¡è¦ç‰¹å¾ã€‚</dd>
        
        <dt><strong class="term">ç¨€ç–ä¸“å®¶æ··åˆ(SMoE, Sparse Mixture of Experts)</strong></dt>
        <dd>æ¡ä»¶è®¡ç®—æ¶æ„ï¼šæ¯ä¸ªè¾“å…¥ä»…æ¿€æ´»å°‘æ•°ä¸“å®¶ç½‘ç»œï¼ˆå¦‚ğ‘ƒğ¹ğ¹ğ‘<sub>#</sub>ï¼‰ã€‚é€šè¿‡è·¯ç”±æœºåˆ¶(gate)å®ç°ï¼Œæ˜¾è‘—æå‡æ¨¡å‹å®¹é‡è€Œä¸å¢åŠ è®¡ç®—å¼€é”€ã€‚</dd>
        
        <dt><strong class="term">RankMixerå—(RankMixer Block)</strong></dt>
        <dd>æ¨¡å‹åŸºç¡€å•å…ƒï¼ˆå›¾1ï¼‰ï¼ŒåŒ…å«ä»¤ç‰Œæ··åˆï¼ˆç‰¹å¾äº¤å‰ï¼‰å’ŒSMoE-FFNï¼ˆç‰¹å¾å˜æ¢ï¼‰ä¸¤ä¸ªæ¨¡å—ã€‚é€šè¿‡æ®‹å·®è¿æ¥(Add & Norm)å †å ğ¿å±‚å½¢æˆå®Œæ•´æ¨¡å‹ã€‚</dd>
    </dl>
</div>

</body>
</html>