<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>OneRecæŠ€æœ¯æŠ¥å‘Šè§£æ</title>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <style>
    body { font-family: Arial, sans-serif; line-height: 1.6; }
    .original { 
      background-color: #f0f0f0; 
      border: 1px solid #cccccc;
      padding: 15px;
      margin-bottom: 5px;
    }
    .translation {
      background-color: #e0f7e0;
      border: 1px solid #4caf50;
      padding: 15px;
      margin-bottom: 20px;
    }
    .figure {
      background-color: #fffde7;
      padding: 15px;
      margin: 20px 0;
      text-align: center;
    }
    .formula-container {
      text-align: center;
      margin: 20px 0;
    }
    .formula-number {
      display: block;
      margin-top: 5px;
      font-style: italic;
    }
    .term {
      color: red;
      font-weight: bold;
    }
    h1, h2, h3 { color: #2c3e50; }
    section { margin-bottom: 30px; }
    dl { margin-left: 20px; }
    dt { font-weight: bold; margin-top: 10px; }
  </style>
</head>
<body>
  <h1>OneRecæŠ€æœ¯æŠ¥å‘Šè§£æ</h1>
  
  <section id="content-understanding">
    <h2>å†…å®¹ç†è§£</h2>
    <p>è¯¥æ–‡æœ¬æè¿°äº†OneRecæ¨èç³»ç»Ÿçš„ä¸¤ä¸ªæ ¸å¿ƒæŠ€æœ¯ç»„ä»¶ï¼šTokenizationæ–¹æ³•å’ŒEncoderæ¶æ„ã€‚Tokenizationéƒ¨åˆ†è¯¦ç»†ä»‹ç»äº†<strong class="term">RQ-Kmeansï¼ˆæ®‹å·®é‡åŒ–Kå‡å€¼ï¼‰</strong>ç®—æ³•ï¼Œè¿™æ˜¯ä¸€ç§åˆ†å±‚é‡åŒ–æ–¹æ³•ï¼Œé€šè¿‡è¿­ä»£çš„K-meansèšç±»ç”Ÿæˆç”±ç²—åˆ°ç»†çš„è¯­ä¹‰IDã€‚Encoderéƒ¨åˆ†åˆ™æå‡ºäº†å¤šå°ºåº¦ç‰¹å¾å·¥ç¨‹æ¡†æ¶ï¼Œä½¿ç”¨å››æ¡ä¸“ç”¨é€šè·¯å¤„ç†ç”¨æˆ·è¡Œä¸ºæ•°æ®ã€‚Figure 4å±•ç¤ºäº†ç¼–ç å™¨-è§£ç å™¨æ¶æ„çš„å¯è§†åŒ–è¡¨ç¤ºã€‚</p>
  </section>
  
  <section id="translation">
    <h2>å†…å®¹ç¿»è¯‘</h2>
    
    <div class="figure">
      <div class="original">
        OneRec Technical Report<br>
        FullyVisibleSelf-AttentionFeedForwardAdd&RMSNormEncoderCasualSelf-AttentionAdd&RMSNormFullyVisibleCross-Attentionkey/valueRouterâŠ—âŠ•âŠ—Expert2MoELayerâ‹¯<br>
        Decoderâ‹¯â‹¯â‹¯ğ’”ğ’ğŸğ’”ğ’ğŸğ’”ğ’ğ‘³ğ’•ğ‘©ğ‘¶ğ‘ºUser StaticPathwayShort-term PathwayPositive-FeedbackPathwayLifelong PathwayUser InterestCompressionÃ—ğ¿$%&Ã—ğ¿'$&Expert1Expert3Expert4ExpertNExpertsğ’”ğ’ğŸğ’”ğ’ğŸğ’”ğ’ğ‘³ğ’•EncoderCasualSelf-AttentionFullyVisibleCross-Attentionkey/valueDecoderâ‹¯â‹¯â‹¯ğ’”ğ’ğŸğ’”ğ’ğŸğ’”ğ’ğ‘³ğ’•ğ‘©ğ‘¶ğ‘ºUser StaticPathwayShort-term PathwayPositive-FeedbackPathwayLifelong PathwayUser InterestCompressionÃ—ğ¿$%&Ã—ğ¿'$&<br>
        Figure 4|Illustration of our encoder-decoder architecture.
      </div>
      <div class="translation">
        OneRecæŠ€æœ¯æŠ¥å‘Š<br>
        [æ¶æ„å›¾ç»„ä»¶ï¼šå…¨å¯è§è‡ªæ³¨æ„åŠ›â†’å‰é¦ˆç½‘ç»œâ†’åŠ æ³•&RMSå½’ä¸€åŒ–â†’ç¼–ç å™¨â†’å› æœè‡ªæ³¨æ„åŠ›â†’åŠ æ³•&RMSå½’ä¸€åŒ–â†’å…¨å¯è§äº¤å‰æ³¨æ„åŠ›(key/value)â†’è·¯ç”±å™¨âŠ—âŠ•âŠ—â†’ä¸“å®¶2â†’MoEå±‚â‹¯]<br>
        [è§£ç å™¨ç»„ä»¶â‹¯â‹¯â‹¯ğ’”ğ’ğŸğ’”ğ’ğŸğ’”ğ’ğ‘³ğ’•ğ‘©ğ‘¶ğ‘ºç”¨æˆ·é™æ€é€šè·¯â†’çŸ­æœŸé€šè·¯â†’æ­£åé¦ˆé€šè·¯â†’ç»ˆèº«é€šè·¯â†’ç”¨æˆ·å…´è¶£å‹ç¼©Ã—ğ¿$%&Ã—ğ¿'$&ä¸“å®¶1/3/4/N]<br>
        [ç¼–ç å™¨ç»„ä»¶ï¼šğ’”ğ’ğŸğ’”ğ’ğŸğ’”ğ’ğ‘³ğ’•â†’å› æœè‡ªæ³¨æ„åŠ›â†’å…¨å¯è§äº¤å‰æ³¨æ„åŠ›(key/value)â†’è§£ç å™¨â‹¯â‹¯â‹¯ğ’”ğ’ğŸğ’”ğ’ğŸğ’”ğ’ğ‘³ğ’•ğ‘©ğ‘¶ğ‘ºç”¨æˆ·é™æ€é€šè·¯â†’çŸ­æœŸé€šè·¯â†’æ­£åé¦ˆé€šè·¯â†’ç»ˆèº«é€šè·¯â†’ç”¨æˆ·å…´è¶£å‹ç¼©Ã—ğ¿$%&Ã—ğ¿'$&]<br>
        <strong>å›¾4|æˆ‘ä»¬çš„ç¼–ç å™¨-è§£ç å™¨æ¶æ„ç¤ºæ„å›¾</strong>
      </div>
    </div>
    
    <div class="original">
      2.1.2. Tokenization<br>
      We utilize RQ-Kmeans (Luo et al., 2024) for tokenization, which employs residual quantization to generate semantic IDs in a coarse-to-fine manner. This method constructs codebooks by applying K-means clustering directly on the residuals. An illustration of the RQ-Kmeans process is provided in Figure 3 (right).
    </div>
    <div class="translation">
      <strong>2.1.2. æ ‡è®°åŒ–</strong><br>
      æˆ‘ä»¬é‡‡ç”¨<strong class="term">RQ-Kmeansï¼ˆæ®‹å·®é‡åŒ–Kå‡å€¼ï¼‰</strong>(Luo et al., 2024)è¿›è¡Œæ ‡è®°åŒ–ï¼Œè¯¥æ–¹æ³•åˆ©ç”¨<strong class="term">æ®‹å·®é‡åŒ–ï¼ˆResidual Quantizationï¼‰</strong>ä»¥<strong class="term">ç”±ç²—åˆ°ç»†ï¼ˆCoarse-to-fineï¼‰</strong>çš„æ–¹å¼ç”Ÿæˆ<strong class="term">è¯­ä¹‰IDï¼ˆSemantic IDsï¼‰</strong>ã€‚è¯¥æ–¹æ³•ç›´æ¥åœ¨æ®‹å·®ä¸Šåº”ç”¨<strong class="term">Kå‡å€¼èšç±»ï¼ˆK-means clusteringï¼‰</strong>æ¥æ„å»º<strong class="term">ç æœ¬ï¼ˆCodebooksï¼‰</strong>ã€‚RQ-Kmeansè¿‡ç¨‹çš„å›¾ç¤ºè§å›¾3ï¼ˆå³ï¼‰ã€‚
    </div>
    
    <div class="original">
      Formally, the initial residual at layer ğ‘™=1 is defined as:<br>
      R(1)=ËœMğ‘–âˆˆâ„ğ‘Ëœğ‘€Ã—ğ‘‘ğ‘¡|âˆ€videoğ‘–	. (5)
    </div>
    <div class="formula-container">
      \\[ \\mathbf{R}^{(1)} = \\{ \\tilde{\\mathbf{M}}_i \\in \\mathbb{R}^{N_{\\tilde{M}} \\times d_t} \\mid \\forall \\text{ video } i \\} \\]
      <span class="formula-number">(5)</span>
    </div>
    <div class="translation">
      å½¢å¼åŒ–å®šä¹‰ï¼Œç¬¬ğ‘™=1å±‚çš„åˆå§‹æ®‹å·®ä¸ºï¼š
    </div>
    
    <div class="original">
      For each layer ğ‘™, the codebook C(ğ‘™) is derived from K-means centroids of R(ğ‘™):<br>
      C(ğ‘™)=K-means(R(ğ‘™),ğ‘ğ‘¡), (6)<br>
      where C(ğ‘™)=n ğ’„(ğ‘™)ğ‘˜âˆˆâ„ğ‘Ëœğ‘€Ã—ğ‘‘ğ‘¡|ğ‘˜=1,...,ğ‘ğ‘¡o and ğ‘ğ‘¡ is the codebook size.
    </div>
    <div class="formula-container">
      \\[ \\mathbf{C}^{(l)} = \\text{K-means}(\\mathbf{R}^{(l)}, N_t) \\]
      <span class="formula-number">(6)</span>
    </div>
    <div class="translation">
      å¯¹äºæ¯ä¸ªå±‚çº§ğ‘™ï¼Œç æœ¬C(ğ‘™)ä»R(ğ‘™)çš„K-meansè´¨å¿ƒå¯¼å‡ºï¼š<br>
      å…¶ä¸­C(ğ‘™) = { ğ’„<sub>ğ‘˜</sub><sup>(ğ‘™)</sup> âˆˆ â„<sup>ğ‘Ìƒ<sub>ğ‘€</sub>Ã—ğ‘‘<sub>ğ‘¡</sub></sup> | ğ‘˜=1,...,ğ‘ğ‘¡ }ï¼Œğ‘ğ‘¡è¡¨ç¤ºç æœ¬å¤§å°ã€‚
    </div>
    
    <div class="original">
      The nearest centroid index for item ğ‘– is computed as:<br>
      ğ‘ ğ‘™ğ‘–=arg minğ‘˜â€–R(ğ‘™)ğ‘–âˆ’ğ’„(ğ‘™)ğ‘˜â€–, (7)<br>
      where âˆ¥Â·âˆ¥ denotes the Euclidean norm.
    </div>
    <div class="formula-container">
      \\[ s_i^l = \\arg\\min_k \\left\\| \\mathbf{R}_i^{(l)} - \\mathbf{c}_k^{(l)} \\right\\| \\]
      <span class="formula-number">(7)</span>
    </div>
    <div class="translation">
      é¡¹ç›®ğ‘–çš„æœ€é‚»è¿‘è´¨å¿ƒç´¢å¼•è®¡ç®—å¦‚ä¸‹ï¼š<br>
      å…¶ä¸­âˆ¥Â·âˆ¥è¡¨ç¤º<strong class="term">æ¬§å‡ é‡Œå¾—èŒƒæ•°ï¼ˆEuclidean normï¼‰</strong>ã€‚
    </div>
    
    <div class="original">
      The residual of video ğ‘– for layer ğ‘™+1 is then updated:<br>
      R(ğ‘™+1)ğ‘–=R(ğ‘™)ğ‘–âˆ’ğ’„(ğ‘™)ğ‘ ğ‘™ğ‘–. (8)
    </div>
    <div class="formula-container">
      \\[ \\mathbf{R}_i^{(l+1)} = \\mathbf{R}_i^{(l)} - \\mathbf{c}_{s_i^l}^{(l)} \\]
      <span class="formula-number">(8)</span>
    </div>
    <div class="translation">
      éšåæ›´æ–°è§†é¢‘ğ‘–åœ¨ğ‘™+1å±‚çš„æ®‹å·®ï¼š
    </div>
    
    <div class="original">
      This quantization iterates across ğ¿ğ‘¡=3 layers.<br>
      As demonstrated in Section 4.4, RQ-Kmeans offers enhanced reconstruction quality, better codebook utilization, and improved balance compared to the widely used RQ-VAE (Lee et al., 2022; Rajput et al., 2024). At this stage, each video ğ‘š can be represented by ğ¿ğ‘¡ coarse-to-fine semantic identifiers: {ğ‘ 1ğ‘š,ğ‘ 2ğ‘š,...,ğ‘ ğ¿ğ‘¡ğ‘š}, which will serve as the output of the OneRec recommendation system, enabling progressive item generation.
    </div>
    <div class="translation">
      æ­¤é‡åŒ–è¿‡ç¨‹è¿­ä»£ğ¿<sub>ğ‘¡</sub>=3å±‚ã€‚<br>
      å¦‚ç¬¬4.4èŠ‚æ‰€ç¤ºï¼Œä¸å¹¿æ³›ä½¿ç”¨çš„RQ-VAEç›¸æ¯”ï¼ŒRQ-Kmeansæä¾›æ›´å¥½çš„é‡å»ºè´¨é‡ã€æ›´é«˜çš„ç æœ¬åˆ©ç”¨ç‡å’Œæ›´ä¼˜çš„å¹³è¡¡æ€§ã€‚æ­¤æ—¶ï¼Œæ¯ä¸ªè§†é¢‘ğ‘šå¯ç”±ğ¿<sub>ğ‘¡</sub>ä¸ªç”±ç²—åˆ°ç»†çš„è¯­ä¹‰æ ‡è¯†ç¬¦è¡¨ç¤ºï¼š{ğ‘ <sup>1</sup><sub>ğ‘š</sub>, ğ‘ <sup>2</sup><sub>ğ‘š</sub>, ..., ğ‘ <sup>ğ¿<sub>ğ‘¡</sub></sup><sub>ğ‘š</sub>}ï¼Œè¿™äº›å°†ä½œä¸ºOneRecæ¨èç³»ç»Ÿçš„è¾“å‡ºï¼Œå®ç°æ¸è¿›å¼é¡¹ç›®ç”Ÿæˆã€‚
    </div>
    
    <div class="original">
      2.2. Encoder<br>
      2.2.1. Multi-Scale Feature Engineering<br>
      This section presents the feature engineering component of OneRec. We process user behavior data through four specialized embedding pathways, each designed to capture distinct scales of user
    </div>
    <div class="translation">
      <strong>2.2. ç¼–ç å™¨</strong><br>
      <strong>2.2.1. å¤šå°ºåº¦ç‰¹å¾å·¥ç¨‹</strong><br>
      æœ¬èŠ‚ä»‹ç»OneRecçš„ç‰¹å¾å·¥ç¨‹ç»„ä»¶ã€‚æˆ‘ä»¬é€šè¿‡å››æ¡ä¸“ç”¨<strong class="term">åµŒå…¥é€šè·¯ï¼ˆEmbedding Pathwaysï¼‰</strong>å¤„ç†ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œæ¯æ¡é€šè·¯è®¾è®¡ç”¨äºæ•æ‰ä¸åŒå°ºåº¦çš„ç”¨æˆ·ç‰¹å¾ã€‚
    </div>
  </section>
  
  <section id="summary">
    <h2>æ‘˜è¦æ€»ç»“</h2>
    <p>æœ¬æ–‡ä»‹ç»äº†OneRecæ¨èç³»ç»Ÿçš„ä¸¤å¤§æ ¸å¿ƒæŠ€æœ¯ï¼š1) ä½¿ç”¨<strong class="term">RQ-Kmeansï¼ˆæ®‹å·®é‡åŒ–Kå‡å€¼ï¼‰</strong>è¿›è¡Œåˆ†å±‚è¯­ä¹‰IDç”Ÿæˆï¼Œé€šè¿‡3å±‚è¿­ä»£çš„æ®‹å·®é‡åŒ–ï¼ˆå…¬å¼5-8ï¼‰æ„å»ºç”±ç²—åˆ°ç»†çš„è§†é¢‘è¡¨ç¤ºï¼›2) ç¼–ç å™¨é‡‡ç”¨<strong class="term">å¤šå°ºåº¦ç‰¹å¾å·¥ç¨‹ï¼ˆMulti-Scale Feature Engineeringï¼‰</strong>ï¼Œé€šè¿‡å››æ¡ä¸“ç”¨é€šè·¯å¤„ç†ç”¨æˆ·è¡Œä¸ºã€‚Figure 4å±•ç¤ºäº†ç¼–ç å™¨-è§£ç å™¨æ¶æ„ï¼Œå…¶ä¸­åŒ…å«MoEå±‚å’Œç”¨æˆ·å…´è¶£é€šè·¯ã€‚RQ-Kmeansç›¸æ¯”RQ-VAEåœ¨é‡å»ºè´¨é‡å’Œç æœ¬åˆ©ç”¨ç‡æ–¹é¢æœ‰æ˜¾è‘—æå‡ã€‚</p>
  </section>
  
  <section id="terms">
    <h2>æœ¯è¯­è¯†åˆ«</h2>
    <dl>
      <dt>RQ-Kmeans (æ®‹å·®é‡åŒ–Kå‡å€¼)</dt>
      <dd>ä¸€ç§åˆ†å±‚é‡åŒ–æ–¹æ³•ï¼Œé€šè¿‡è¿­ä»£åº”ç”¨K-meansèšç±»äºæ®‹å·®å‘é‡ç”Ÿæˆè¯­ä¹‰IDã€‚ç›¸æ¯”RQ-VAEå…·æœ‰æ›´å¥½çš„é‡å»ºè´¨é‡å’Œç æœ¬åˆ©ç”¨ç‡ã€‚</dd>
      
      <dt>Residual Quantization (æ®‹å·®é‡åŒ–)</dt>
      <dd>åˆ†å±‚å‘é‡é‡åŒ–æŠ€æœ¯ï¼Œæ¯ä¸€å±‚å¯¹å‰ä¸€å±‚é‡åŒ–åçš„æ®‹å·®è¿›è¡Œå†é‡åŒ–ï¼Œå½¢æˆç”±ç²—åˆ°ç»†çš„è¡¨ç¤ºï¼ˆå…¬å¼5-8ï¼‰ã€‚</dd>
      
      <dt>Semantic IDs (è¯­ä¹‰ID)</dt>
      <dd>é€šè¿‡åˆ†å±‚é‡åŒ–ç”Ÿæˆçš„æ ‡è¯†ç¬¦åºåˆ—{ğ‘ <sup>1</sup><sub>ğ‘š</sub>, ..., ğ‘ <sup>ğ¿<sub>ğ‘¡</sub></sup><sub>ğ‘š</sub>}ï¼Œè¡¨ç¤ºè§†é¢‘çš„è¯­ä¹‰å†…å®¹ï¼Œç”¨äºæ¸è¿›å¼æ¨èã€‚</dd>
      
      <dt>Codebooks (ç æœ¬)</dt>
      <dd>ç”±K-meansèšç±»ç”Ÿæˆçš„è´¨å¿ƒé›†åˆC<sup>(ğ‘™)</sup> = {ğ’„<sub>1</sub><sup>(ğ‘™)</sup>, ..., ğ’„<sub>ğ‘<sub>ğ‘¡</sub></sub><sup>(ğ‘™)</sup>}ï¼Œç”¨äºæ®‹å·®é‡åŒ–ï¼ˆå…¬å¼6ï¼‰ã€‚</dd>
      
      <dt>Euclidean norm (æ¬§å‡ é‡Œå¾—èŒƒæ•°)</dt>
      <dd>å‘é‡è·ç¦»åº¦é‡æ–¹å¼âˆ¥ğ±âˆ’ğ²âˆ¥ = âˆšÎ£(ğ‘¥<sub>ğ‘–</sub>âˆ’ğ‘¦<sub>ğ‘–</sub>)Â²ï¼Œç”¨äºè®¡ç®—æ®‹å·®å‘é‡åˆ°è´¨å¿ƒçš„è·ç¦»ï¼ˆå…¬å¼7ï¼‰ã€‚</dd>
      
      <dt>Encoder-Decoder Architecture (ç¼–ç å™¨-è§£ç å™¨æ¶æ„)</dt>
      <dd>OneRecçš„æ ¸å¿ƒæ¡†æ¶ï¼ˆFigure 4ï¼‰ï¼ŒåŒ…å«å…¨å¯è§è‡ªæ³¨æ„åŠ›ã€MoEå±‚å’Œç”¨æˆ·è¡Œä¸ºå¤„ç†é€šè·¯ã€‚</dd>
      
      <dt>Multi-Scale Feature Engineering (å¤šå°ºåº¦ç‰¹å¾å·¥ç¨‹)</dt>
      <dd>é€šè¿‡å››æ¡ä¸“ç”¨é€šè·¯ï¼ˆç”¨æˆ·é™æ€é€šè·¯ã€çŸ­æœŸé€šè·¯ã€æ­£åé¦ˆé€šè·¯ã€ç»ˆèº«é€šè·¯ï¼‰æå–ä¸åŒæ—¶é—´å°ºåº¦çš„ç”¨æˆ·ç‰¹å¾ã€‚</dd>
      
      <dt>Embedding Pathways (åµŒå…¥é€šè·¯)</dt>
      <dd>ç‰¹åŒ–çš„ç‰¹å¾å¤„ç†é€šé“ï¼ŒåŒ…æ‹¬User Static Pathwayã€Short-term Pathwayç­‰ï¼Œç”¨äºä¸åŒå°ºåº¦ç”¨æˆ·å…´è¶£å»ºæ¨¡ã€‚</dd>
      
      <dt>MoE Layer (æ··åˆä¸“å®¶å±‚)</dt>
      <dd>Figure 4ä¸­çš„âŠ—âŠ•âŠ—æ¨¡å—ï¼Œé€šè¿‡è·¯ç”±å™¨åŠ¨æ€é€‰æ‹©ä¸“å®¶æ¨¡å‹å¤„ç†ä¸åŒç‰¹å¾ã€‚</dd>
      
      <dt>Coarse-to-fine (ç”±ç²—åˆ°ç»†)</dt>
      <dd>åˆ†å±‚ç”Ÿæˆç­–ç•¥ï¼Œé¦–å±‚ç”Ÿæˆç²—ç•¥è¯­ä¹‰è¡¨ç¤ºï¼Œåç»­å±‚é€æ­¥ç»†åŒ–ï¼ˆğ¿<sub>ğ‘¡</sub>=3å±‚ï¼‰ã€‚</dd>
    </dl>
  </section>
</body>
</html>